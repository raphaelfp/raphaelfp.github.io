"use strict";function calculaTroco(){function a(a,o){return a.qtde*a.val<o.qtde*o.val?1:a.qtde*a.val<o.qtde*o.val?-1:0}function o(a,o){return a.val<o.val?1:a.val<o.val?-1:0}var t=$("#labelResultado"),e=$valorCompra.val(),n=$valorRecebido.val(),l=[{qtde:parseInt($doisReais.val()),val:2},{qtde:parseInt($cincoReais.val()),val:5},{qtde:parseInt($dezReais.val()),val:10},{qtde:parseInt($vinteReais.val()),val:20},{qtde:parseInt($cinquentaReais.val()),val:50},{qtde:parseInt($cemReais.val()),val:100},{qtde:parseInt($umReal.val()),val:1}];$btnIgnorarCaixa.hasClass("selecionado")?l.sort(o):l.sort(a);var r,i,s,c,d=l,v=[50,25,10,5,1],u="";if(r=$troco.val()!==$troco.attr("value")?$troco.val():n-e,0>=r)return t.find(".response__troco").html("Impossível fornecer um troco menor que zero.<br/>Corrija os valores e tente novamente."),!1;for(t.find(".response__troco").html("Troco = R$"+r),s=Math.floor(r),i=0;0!==s;)l[i].qtde<=0||(c=s/l[i].val,c=Math.floor(c),0!==c&&(d[i].qtde=l[i].qtde-c,u+="<li>"+c+" nota(s) de R$"+l[i].val+"</li>",s%=l[i].val),i+=1);for(s=Math.round(100*(r-Math.floor(r))),i=0;0!==s;)c=s/v[i],c=Math.floor(c),0!==c&&(u+="<li>"+c+" moeda(s) de "+v[i]+" centavos</li>",s%=v[i]),i+=1;t.find(".response__notas").html(u),$body.attr("data-notas",JSON.stringify(l)),$body.attr("data-copia-notas",JSON.stringify(d))}var $body=$("body"),$btnEnviar=$("#btnEnviar"),$btnCaixa=$("#btnCaixa"),$btnIgnorarCaixa=$("#btnIgnorarCaixa"),$valorRecebido=$("#valorRecebido"),$valorCompra=$("#valorCompra"),$troco=$("#troco"),$doisReais=$("#dois-reais"),$cincoReais=$("#cinco-reais"),$dezReais=$("#dez-reais"),$vinteReais=$("#vinte-reais"),$cinquentaReais=$("#cinquenta-reais"),$cemReais=$("#cem-reais"),$umReal=$("#um-real");$(function(){$(".label").on("click",function(){event.stopPropagation(),$(this).prev().attr("checked",!$(this).prev().attr("checked"))}),$(".form-t__input-tooltip").on("click",function(){$(this).find(".form-t__tooltip").toggleClass("hide")}),$("input").on("focus",function(){var a=$(this);a.val()===a.attr("value")&&a.val("")}),$("input").on("blur",function(){var a=$(this);""===a.val()&&a.val(a.attr("value"))}),$btnEnviar.on("focus",function(){$(this).attr("value","Calcular")}),$btnCaixa.on("focus",function(){$(this).attr("value","Caixa")}),$btnEnviar.on("click",function(){var a=$(".error");return $body.hasClass("modal--open")&&($body.removeClass("modal--open"),$(".modal--opened").removeClass("modal--opened")),$valorRecebido.val()!==$valorRecebido.attr("value")&&$valorCompra.val()!==$valorCompra.attr("value")||$troco.val()!==$troco.attr("value")?(calculaTroco(),$body.addClass("modal--open"),$("#modal-response").toggleClass("modal--opened"),!1):(a.hasClass("fade-in-out")&&a.replaceWith(a.removeClass("fade-in-out").clone()),$(".error").addClass("fade-in-out"),!1)}),$btnCaixa.on("click",function(){var a=$(".error");return a.hasClass("fade-in-out")&&a.replaceWith(a.removeClass("fade-in-out").clone()),$body.hasClass("modal--open")&&($body.removeClass("modal--open"),$(".modal--opened").removeClass("modal--opened")),$body.toggleClass("modal--open"),$("#modal-config").toggleClass("modal--opened"),!1}),$(".modal").on("click",function(){return!1}),$("body").on("click",function(){$body.hasClass("modal--open")&&($("body").removeClass("modal--open"),$(".modal--opened").removeClass("modal--opened"))}),$valorCompra.on("blur",function(){var a=$(this);a.val()!==a.attr("value")&&$troco.val($troco.attr("value"))}),$valorRecebido.on("blur",function(){var a=$(this);a.val()!==a.attr("value")&&$troco.val($troco.attr("value"))}),$troco.on("blur",function(){var a=$(this);a.val()!==a.attr("value")&&($valorRecebido.val($valorRecebido.attr("value")),$valorCompra.val($valorCompra.attr("value")))}),$(".close__modal").on("click",function(){$body.hasClass("modal--open")&&($body.removeClass("modal--open"),$(".modal--opened").removeClass("modal--opened"))})});var $btnLimpar=$("#btnLimpar"),$btnAleatorio=$("#btnAleatorio"),$inputConfig=$(".form-t__input-config");$(function(){$btnLimpar.on("focus",function(){$(this).attr("value","Limpar")}),$btnAleatorio.on("focus",function(){$(this).attr("value","Aleatório")}),$btnIgnorarCaixa.on("focus",function(){$(this).attr("value","Ignorar a quantidade"),$(this).toggleClass("selecionado")}),$btnLimpar.on("click",function(){$inputConfig.val($inputConfig.attr("value")),$body.attr("data-notas",""),$body.attr("data-copia-notas","")}),$btnAleatorio.on("click",function(){$inputConfig.each(function(){$(this).val(Math.floor(100*Math.random()+1))}),$body.attr("data-notas",""),$body.attr("data-copia-notas","")})});var $btnOk=$("#btnOk"),$btnCancelar=$("#btnCancelar");$(function(){$btnOk.on("focus",function(){$(this).attr("value","Ok")}),$btnCancelar.on("focus",function(){$(this).attr("value","Cancelar")}),$btnLimpar.on("click",function(){$inputConfig.val($inputConfig.attr("value"))}),$btnCancelar.on("click",function(){$body.hasClass("modal--open")&&($body.removeClass("modal--open"),$(".modal--opened").removeClass("modal--opened"))}),$btnOk.on("click",function(){$body.hasClass("modal--open")&&($body.removeClass("modal--open"),$(".modal--opened").removeClass("modal--opened")),$body.attr("data-notas",$body.attr("data-copia-notas"));for(var a=$.parseJSON($body.attr("data-copia-notas")),o=a.length-1;o>=0;o--)switch(a[o].val){case 100:$cemReais.val(a[o].qtde);break;case 50:$cinquentaReais.val(a[o].qtde);break;case 20:$vinteReais.val(a[o].qtde);break;case 10:$dezReais.val(a[o].qtde);break;case 5:$cincoReais.val(a[o].qtde);break;case 2:$doisReais.val(a[o].qtde);break;case 1:$umReal.val(a[o].qtde)}})});