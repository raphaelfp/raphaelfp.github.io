"use strict";function calculaTroco(){function a(a,o){return a.qtde*a.val<o.qtde*o.val?1:a.qtde*a.val<o.qtde*o.val?-1:0}var o=$("#labelResultado"),e=$valorCompra.val(),t=$valorRecebido.val(),n=[{qtde:parseInt($doisReais.val()),val:2},{qtde:parseInt($cincoReais.val()),val:5},{qtde:parseInt($dezReais.val()),val:10},{qtde:parseInt($vinteReais.val()),val:20},{qtde:parseInt($cinquentaReais.val()),val:50},{qtde:parseInt($cemReais.val()),val:100},{qtde:parseInt($umReal.val()),val:1}];n.sort(a);var l,r,i,s,d=n,c=[50,25,10,5,1],v="";if(l=$troco.val()!==$troco.attr("value")?$troco.val():t-e,0>=l)return o.find(".response__troco").html("Impossível fornecer um troco menor que zero.<br/>Corrija os valores e tente novamente."),!1;for(o.find(".response__troco").html("Troco = R$"+l),i=Math.floor(l),r=0;0!==i;)n[r].qtde<=0||(s=i/n[r].val,s=Math.floor(s),0!==s&&(d[r].qtde=n[r].qtde-s,v+="<li>"+s+" nota(s) de R$"+n[r].val+"</li>",i%=n[r].val),r+=1);for(i=Math.round(100*(l-Math.floor(l))),r=0;0!==i;)s=i/c[r],s=Math.floor(s),0!==s&&(v+="<li>"+s+" moeda(s) de "+c[r]+" centavos</li>",i%=c[r]),r+=1;o.find(".response__notas").html(v),$body.attr("data-notas",JSON.stringify(n)),$body.attr("data-copia-notas",JSON.stringify(d))}var $body=$("body"),$btnEnviar=$("#btnEnviar"),$btnCaixa=$("#btnCaixa"),$valorRecebido=$("#valorRecebido"),$valorCompra=$("#valorCompra"),$troco=$("#troco"),$doisReais=$("#dois-reais"),$cincoReais=$("#cinco-reais"),$dezReais=$("#dez-reais"),$vinteReais=$("#vinte-reais"),$cinquentaReais=$("#cinquenta-reais"),$cemReais=$("#cem-reais"),$umReal=$("#um-real");$(function(){$(".form-t__input-tooltip").on("click",function(){$(this).find(".form-t__tooltip").toggleClass("hide")}),$("input").on("focus",function(){var a=$(this);a.val()===a.attr("value")&&a.val("")}),$("input").on("blur",function(){var a=$(this);""===a.val()&&a.val(a.attr("value"))}),$btnEnviar.on("focus",function(){$(this).attr("value","Calcular")}),$btnCaixa.on("focus",function(){$(this).attr("value","Caixa")}),$btnEnviar.on("click",function(){var a=$(".error");return $body.hasClass("modal--open")&&($body.removeClass("modal--open"),$(".modal--opened").removeClass("modal--opened")),$valorRecebido.val()!==$valorRecebido.attr("value")&&$valorCompra.val()!==$valorCompra.attr("value")||$troco.val()!==$troco.attr("value")?(calculaTroco(),$body.addClass("modal--open"),$("#modal-response").toggleClass("modal--opened"),!1):(a.hasClass("fade-in-out")&&a.replaceWith(a.removeClass("fade-in-out").clone()),$(".error").addClass("fade-in-out"),!1)}),$btnCaixa.on("click",function(){var a=$(".error");return a.hasClass("fade-in-out")&&a.replaceWith(a.removeClass("fade-in-out").clone()),$body.hasClass("modal--open")&&($body.removeClass("modal--open"),$(".modal--opened").removeClass("modal--opened")),$body.toggleClass("modal--open"),$("#modal-config").toggleClass("modal--opened"),!1}),$(".modal").on("click",function(){return!1}),$("body").on("click",function(){$body.hasClass("modal--open")&&($("body").removeClass("modal--open"),$(".modal--opened").removeClass("modal--opened"))}),$valorCompra.on("blur",function(){var a=$(this);a.val()!==a.attr("value")&&$troco.val($troco.attr("value"))}),$valorRecebido.on("blur",function(){var a=$(this);a.val()!==a.attr("value")&&$troco.val($troco.attr("value"))}),$troco.on("blur",function(){var a=$(this);a.val()!==a.attr("value")&&($valorRecebido.val($valorRecebido.attr("value")),$valorCompra.val($valorCompra.attr("value")))}),$(".close__modal").on("click",function(){$body.hasClass("modal--open")&&($body.removeClass("modal--open"),$(".modal--opened").removeClass("modal--opened"))})});var $btnLimpar=$("#btnLimpar"),$btnAleatorio=$("#btnAleatorio"),$inputConfig=$(".form-t__input-config");$(function(){$btnLimpar.on("focus",function(){$(this).attr("value","Limpar")}),$btnAleatorio.on("focus",function(){$(this).attr("value","Aleatório")}),$btnLimpar.on("click",function(){$inputConfig.val($inputConfig.attr("value")),$body.attr("data-notas",""),$body.attr("data-copia-notas","")}),$btnAleatorio.on("click",function(){$inputConfig.each(function(){$(this).val(Math.floor(100*Math.random()+1))}),$body.attr("data-notas",""),$body.attr("data-copia-notas","")})});var $btnOk=$("#btnOk"),$btnCancelar=$("#btnCancelar");$(function(){$btnOk.on("focus",function(){$(this).attr("value","Ok")}),$btnCancelar.on("focus",function(){$(this).attr("value","Cancelar")}),$btnLimpar.on("click",function(){$inputConfig.val($inputConfig.attr("value"))}),$btnCancelar.on("click",function(){$body.hasClass("modal--open")&&($body.removeClass("modal--open"),$(".modal--opened").removeClass("modal--opened"))}),$btnOk.on("click",function(){$body.hasClass("modal--open")&&($body.removeClass("modal--open"),$(".modal--opened").removeClass("modal--opened")),$body.attr("data-notas",$body.attr("data-copia-notas"));for(var a=$.parseJSON($body.attr("data-copia-notas")),o=a.length-1;o>=0;o--)switch(a[o].val){case 100:$cemReais.val(a[o].qtde);break;case 50:$cinquentaReais.val(a[o].qtde);break;case 20:$vinteReais.val(a[o].qtde);break;case 10:$dezReais.val(a[o].qtde);break;case 5:$cincoReais.val(a[o].qtde);break;case 2:$doisReais.val(a[o].qtde);break;case 1:$umReal.val(a[o].qtde)}})});